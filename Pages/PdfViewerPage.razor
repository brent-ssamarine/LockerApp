@page "/pdf-viewer"
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager

<div class="viewer-container">
    <div id="toolbar">
        <div class="header">
            <h3>@Title</h3>
            <button type="button" class="btn btn-secondary" @onclick="GoBack">Back</button>
        </div>
    </div>
    <iframe src="_content/pdfjs/web/viewer.html?file=@EncodedPdfUrl" width="100%" height="100%" frameborder="0"></iframe>
</div>

<style>
    .viewer-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
    }

    #toolbar {
        background: #f8f9fa;
        padding: 0.5rem 1rem;
        border-bottom: 1px solid #dee2e6;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .header h3 {
        margin: 0;
    }

    iframe {
        flex-grow: 1;
        border: none;
    }
</style>

@code {
    [Parameter]
    [SupplyParameterFromQuery]
    public string? PdfUrl { get; set; }

    [Parameter]
    [SupplyParameterFromQuery]
    public string? Title { get; set; }

    private string EncodedPdfUrl => Uri.EscapeDataString(PdfUrl ?? "");

    private void GoBack()
    {
        NavigationManager.NavigateTo("/inventory-onsite");
    }
} 